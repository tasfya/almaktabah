<% content_for :title, @series.seo_show_title %>
<%= json_ld_tag(series_json_ld(@series)) %>

<div class="min-h-screen">
  <div class="container mx-auto px-4 max-w-4xl">
    <article class="bg-base-100 rounded-2xl shadow-xl overflow-hidden">
      <div class="p-8 lg:p-12">
        <header class="mb-10">
          <div class="flex flex-col md:flex-row gap-8 items-start">
            <div class="w-32 h-32 bg-base-200 rounded-xl overflow-hidden flex-shrink-0">
              <%= image_tag("background.jpg", class: "w-full h-full object-cover") %>
            </div>
            <div class="flex-1">
              <p class="uppercase tracking-wide text-sm text-base-content/50 mb-2">
                <%= t('.series_label') %>
              </p>
              <h1 class="text-3xl lg:text-4xl font-bold leading-tight mb-3">
                <%= @series.title %>
              </h1>
              <div class="flex items-center gap-2 text-base-content/70 mb-4">
                <%= icon "user", class: "size-4" %>
                <span class="font-medium"><%= @series.scholar.name %></span>
              </div>
              <div class="flex flex-wrap items-center gap-3">
                <% if @series.category.present? %>
                  <span class="badge badge-outline">
                    <%= @series.category %>
                  </span>
                <% end %>
                <span class="badge badge-outline">
                  <%= pluralize(@series.lessons.published.count, 'درس') %>
                </span>
              </div>
              <% if @series.description.present? %>
                <p class="text-base-content/70 mt-4">
                  <%= truncate(@series.description, length: 180) %>
                </p>
              <% end %>
            </div>
          </div>
        </header>

        <section>
          <div class="bg-base-200 rounded-xl overflow-hidden divide-y divide-base-300">
            <% @lessons.each_with_index do |lesson, idx| %>
              <%= render "shared/playlist_card", resource: lesson, with_icon: true, index: idx %>
            <% end %>
          </div>
        </section>
      </div>
    </article>
  </div>
</div>
