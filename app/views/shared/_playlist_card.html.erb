<div class="flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between px-4 py-3 hover:bg-gray-50 transition">
  <div class="flex items-center gap-4">
    <% if local_assigns[:with_icon].present? %>
      <div class="p-2 rounded-lg border w-fit border-background-contrast">
        <%= icon "book-open", class: "size-4 sm:size-5" %>
      </div>
    <% else %>
      <% if local_assigns[:index].present? %>
      <span class="text-gray-500 w-6 text-center"><%= local_assigns[:index] + 1 %></span>
      <% end %>
    <% end %>
    <div>
      <h3 class="font-medium"><%= resource.title %></h3>
      <% if resource.respond_to?(:youtube_url) && resource.youtube_url.present? %>
        <a href="<%= youtube_embed_url(resource.youtube_url) %>" target="_blank"
            class="text-xs text-gray-500 hover:underline flex items-center gap-1">
          <%= icon "youtube", library: "lucide", class: "size-4" %>
        </a>
      <% end %>
    </div>
  </div>
  <div class="flex items-center gap-2">
    <%= play_button(resource: resource, klass: "btn btn-secondary btn-sm") %>
    <%= resource.respond_to?(:optimized_audio) && resource.optimized_audio.attached? && link_to(rails_blob_url(resource.optimized_audio, disposition: "attachment"), download: true, target: "_blank", class: "btn btn-secondary btn-sm w-fit") do %>
      <%= icon "arrow-down-tray", class: "size-3 sm:size-5" %>
    <% end %>
    <button class="btn btn-secondary btn-sm w-fit"
              data-controller="clipboard"
              data-clipboard-text-value="<%= request.original_url %>"
              data-clipboard-success-message-value="<%= t('common.copy_success') %>"
              data-clipboard-error-message-value="<%= t('common.copy_error') %>"
              data-action="click->clipboard#copy">
      <%= icon "share", class: "size-3 sm:size-5"%>
    </button>
  </div>
</div>