<%= form_with url: play_path(resource_type: resource.class.name.downcase, id: resource.id), 
                local: false, 
                data: { 
                  turbo_stream: true,
                  player_id: dom_id(resource),
                  currently_playing: is_playing,
                  controller: "play-button",
                  action: "submit->play-button#handleSubmit"
                } do |form| %>
  <%= form.button type: "submit",
                  class: klass,
                  data: { 
                    play_button_target: "button",
                    disable_with: "Loading..."
                  } do %>
    <% if local_assigns[:custom_content].present? %>
      <%= custom_content %>
    <% else %>
      <span data-play-button-target="playIcon">
        <%= icon("play", class: "size-3 sm:size-5") %>
      </span>
      <span data-play-button-target="pauseIcon" class="hidden">
        <%= icon("pause", class: "size-3 sm:size-5") %>
      </span>
      <span data-play-button-target="loadingIcon" class="hidden">
        <%= icon("arrow-path", class: "size-3 sm:size-5 animate-spin") %>
      </span>
    <% end %>
  <% end %>
  
  <template data-play-button-target="template">
    <%= render partial: "shared/player_skeleton" %>
  </template>
<% end %>
